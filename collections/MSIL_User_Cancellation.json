{
  "info": {
    "_postman_id": "5520af97-0113-42b3-bbc4-710d42d3320a",
    "name": "MSIL User Cancellation",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "updatedAt": "2025-03-06T13:50:18.000Z",
    "createdAt": "2025-03-06T12:18:09.000Z",
    "lastUpdatedBy": "40603464",
    "uid": "40603464-5520af97-0113-42b3-bbc4-710d42d3320a"
  },
  "item": [
    {
      "name": "Drivernumber",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "e29f6217-b443-49b8-8cea-ef571b6d859e",
            "exec": [
              "",
              "pm.collectionVariables.set(\"driver_number\", 7374056444)",
              "",
              "//916499000 ",
              " // 9098765073"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "8c9bfb40-4213-41d1-a0e7-3a04ba24ef39",
            "exec": [
              "// var jsonData = JSON.parse(responseBody);",
              "",
              "var responseBody = pm.response.json()",
              "console.log('req', request)",
              "console.log('res', responseBody)",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "",
              "pm.collectionVariables.set(\"curr_rider_authId\", responseBody.authId);"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "6bb26921-ae99-4d38-b265-c0647f1f5cc2",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"mobileNumber\": \"{{driver_number}}\",\n    \"mobileCountryCode\": \"+91\",\n    \"merchantId\": \"840327a8-f17c-4d7c-8199-a583cfaadc5f\",\n    \"merchantOperatingCity\": \"Delhi\"\n    \n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL_namma_P}}/auth",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "auth"
          ]
        }
      },
      "response": [],
      "uid": "40603464-6bb26921-ae99-4d38-b265-c0647f1f5cc2"
    },
    {
      "name": "DriverOTP",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "a8fa578f-e287-4d48-ad95-920ebb7a7808",
            "exec": [
              "// var response = JSON.parse(responseBody);",
              "var responseBody = pm.response.json()",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "",
              "});",
              "",
              "pm.collectionVariables.set(\"rider_token\", responseBody.token);",
              "pm.collectionVariables.set(\"driver_id\", responseBody.person.id)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "21ad6fec-dbfb-4dfe-ae5c-8f90f5f71b65",
            "exec": [
              "setTimeout(function(){},1000)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "1d970f4c-7ea7-4b36-8ab3-09e52faf3ef3",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"otp\" : \"7891\",\n    \"deviceToken\" : \"5497873d-10ca-42f3-8a32-22de4c916026\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL_namma_P}}/auth/:authId/verify",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "auth",
            ":authId",
            "verify"
          ],
          "variable": [
            {
              "id": "4f6afbf2-085c-4022-b639-079b537f3254",
              "key": "authId",
              "value": "{{curr_rider_authId}}"
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-1d970f4c-7ea7-4b36-8ab3-09e52faf3ef3"
    },
    {
      "name": "Driverlocation",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "b60609d5-3d12-4455-a9a0-256c645b3f42",
            "exec": [
              "var moment = require('moment');",
              "pm.globals.set(\"current_time\", moment.utc().format(\"YYYY-MM-DDTHH:mm:ssZ\"));",
              "",
              "setTimeout(function(){},1000)",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "4ea181e9-78e7-4b58-a2e1-f2f6d0154929",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "// var responseBody = pm.response.json()",
              "",
              "// pm.test(\"Result - Successful\", function() {",
              "",
              "//     pm.expect(responseBody.result).to.be.equal(\"Success\")",
              "// })",
              "",
              "",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "68699427-684a-4242-aa6d-bbb33ff0e809",
      "protocolProfileBehavior": {
        "disabledSystemHeaders": {},
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{rider_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=utf-8",
            "type": "text"
          },
          {
            "key": "mId",
            "value": "96dd7f78-787e-4a0b-8675-e9e6fe93bb8f",
            "type": "text",
            "disabled": true
          },
          {
            "key": "vt",
            "value": "SEDAN",
            "type": "text",
            "disabled": true
          },
          {
            "key": "mId",
            "value": "7f7896dd-787e-4a0b-8675-e9e6fe93bb8f",
            "type": "text"
          },
          {
            "key": "vt",
            "value": "AUTO_RICKSHAW",
            "type": "text"
          },
          {
            "key": "dm",
            "value": "ONLINE",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "[\n    {\n        \"pt\": {\n            \"lat\":13.04371506,\n            \"lon\":77.52553336\n        },\n        \"ts\": \"{{current_time}}\"\n    }\n]",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL_namma_P}}/driver/location",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "driver",
            "location"
          ]
        }
      },
      "response": [],
      "uid": "40603464-68699427-684a-4242-aa6d-bbb33ff0e809"
    },
    {
      "name": "Driversetactivity",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "2d27a918-8250-46af-8196-ace3dc8983fb",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "var responseBody = pm.response.json()",
              "",
              "pm.test(\"Result - Successful\", function() {",
              "    pm.expect(responseBody.result).to.be.equal(\"Success\")",
              "})",
              "",
              "",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "34c65131-0c36-46af-9f3f-01c49aabe4d9",
            "exec": [
              "setTimeout(function(){},1000)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "86f41192-0040-49f1-96a5-5d03286a7161",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{rider_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "\n\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL_namma_P}}/driver/setActivity?active=true&mode=\"ONLINE\"",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "driver",
            "setActivity"
          ],
          "query": [
            {
              "key": "active",
              "value": "true"
            },
            {
              "key": "mode",
              "value": "\"ONLINE\""
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-86f41192-0040-49f1-96a5-5d03286a7161"
    },
    {
      "name": "Driverprofile",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "22adb67f-f271-4e7b-be6b-00a585fb4f10",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "var responseBody = pm.response.json()",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "b638fc25-087b-4dee-bb5e-c08a8213ea03",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{rider_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseURL_namma_P}}/driver/profile",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "driver",
            "profile"
          ]
        }
      },
      "response": [],
      "uid": "40603464-b638fc25-087b-4dee-bb5e-c08a8213ea03"
    },
    {
      "name": "Usernumber",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "8e82a708-ee38-4cf2-9763-8cf907a9bd26",
            "exec": [
              "var responseBody = pm.response.json()",
              "",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "",
              "pm.collectionVariables.set(\"user_authIdId\", responseBody.authId);"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "0c354a5c-4c74-49ca-b0a6-9566597c561e",
            "exec": [
              "pm.collectionVariables.set(\"user_number\", 9455475584)",
              "",
              "setTimeout(function(){},1000)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "2e8f075a-3857-416f-8400-4686f618e800",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"mobileNumber\" : \"9968299819\",\n    \"mobileCountryCode\" : \"+91\",\n    \"merchantId\" : \"NAMMA_YATRI\"\n}\n\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl_app}}/auth",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "auth"
          ]
        }
      },
      "response": [],
      "uid": "40603464-2e8f075a-3857-416f-8400-4686f618e800"
    },
    {
      "name": "UserOtp",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "69c4497c-bc40-43cc-a80c-1bf3ba4a84c3",
            "exec": [
              "var responseBody = pm.response.json()",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "    ",
              "});",
              "",
              "",
              "pm.collectionVariables.set(\"curr_user_token\", responseBody.token);"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "2b08718e-5eb8-4ee6-a946-da801dbda1f4",
            "exec": [
              "setTimeout(function(){},1000)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "ec5d233a-d50a-455a-b91f-e6bfb0780133",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{curr_user_authId}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"otp\" : \"7891\",\n    \"deviceToken\" : \"9983b5dc-99a0-4306-b90d-2345f3417822\" \n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl_app}}/auth/:authId/verify",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "auth",
            ":authId",
            "verify"
          ],
          "variable": [
            {
              "id": "ca7d83ff-aaf2-48df-ada0-00162a17a42a",
              "key": "authId",
              "value": "{{user_authIdId}}"
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-ec5d233a-d50a-455a-b91f-e6bfb0780133"
    },
    {
      "name": "RideSearch",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "50cf5288-5502-4da2-a109-36aeb5208703",
            "exec": [
              "var responseBody = pm.response.json()",
              "pm.collectionVariables.set(\"curr_searchId\", responseBody.searchId);",
              "",
              " pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "",
              "});",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "21bd03ef-9621-4781-bd5d-72fce3bb0761",
            "exec": [
              "setTimeout(function(){},4000)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "87006dac-5642-4e78-b792-10688739f147",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{curr_user_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"fareProductType\": \"ONE_WAY\",\n    \"contents\": {\n        \"origin\": {\n            \"address\": {\n                \"area\": \"8th Block Koramangala\",\n                \"areaCode\": \"560047\",\n                \"building\": \"Juspay Buildings\",\n                \"city\": \"Bangalore\",\n                \"country\": \"India\",\n                \"door\": \"#444\",\n                \"street\": \"18th Main\",\n                \"state\": \"Karnataka\"\n            },\n            \"gps\": {\n            \"lat\":28.628864234086397,\n            \"lon\":77.21080228471327\n    \n            }\n        },\n        \"destination\": {\n            \"address\": {\n                \"area\": \"6th Block Koramangala\",\n                \"areaCode\": \"560047\",\n                \"building\": \"Juspay Apartments\",\n                \"city\": \"Bangalore\",\n                \"country\": \"India\",\n                \"door\": \"#444\",\n                \"street\": \"18th Main\",\n                \"state\": \"Karnataka\"\n            },\n            \"gps\": {\n                \"lat\":28.634367567984594, \n            \"lon\":77.2136627775369\n            }\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl_app}}/rideSearch",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "rideSearch"
          ]
        }
      },
      "response": [],
      "uid": "40603464-87006dac-5642-4e78-b792-10688739f147"
    },
    {
      "name": "SearchIdResults",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "60eb7a24-6065-4e3e-a41b-48f90e5cc392",
            "exec": [
              "",
              "// // setTimeout(function(){",
              "// //  console.log(\"delay\");}, 4000);",
              "//  var jsonData = JSON.parse(responseBody);",
              "",
              "// pm.test(\"Status code is 200\", function () {",
              "//     console.log('req', request)",
              "//     console.log('res', jsonData)",
              "//     pm.response.to.have.status(200);",
              "// });",
              "",
              "// var estimateslen = jsonData.estimates.length;",
              "// for(let i =0; i < estimateslen;i++)",
              "// {",
              "// if((jsonData.estimates[i].agencyName===\"NAMMA_YATRI\") && (jsonData.estimates[i].vehicleVariant===\"AUTO_RICKSHAW\"))",
              "// {",
              "// pm.collectionVariables.set(\"autoEstimateId\",jsonData.estimates[i].id);",
              "// }",
              "// else if((jsonData.estimates[i].agencyName===\"NAMMA_YATRI\") && (jsonData.estimates[i].vehicleVariant===\"SEDAN\"))",
              "// {",
              "// pm.collectionVariables.set(\"sedanEstimateId\",jsonData.estimates[i].id);",
              "// }",
              "// else if((jsonData.estimates[i].agencyName===\"NAMMA_YATRI\") && (jsonData.estimates[i].vehicleVariant===\"SUV\"))",
              "// {",
              "// pm.collectionVariables.set(\"suvEstimateId\",jsonData.estimates[i].id);",
              "// }",
              "// else if((jsonData.estimates[i].agencyName===\"NAMMA_YATRI\") && (jsonData.estimates[i].vehicleVariant===\"TAXI\"))",
              "// {",
              "// pm.collectionVariables.set(\"taxiEstimateId\",jsonData.estimates[i].id);",
              "// }",
              "// else if((jsonData.estimates[i].agencyName===\"NAMMA_YATRI\") && (jsonData.estimates[i].vehicleVariant===\"HATCHBACK\"))",
              "// {",
              "// pm.collectionVariables.set(\"hatchbackEstimateId\",jsonData.estimates[i].id);",
              "// }",
              "// }",
              "",
              "// setTimeout(function(){},2000)",
              "let body = pm.response.json();",
              "let vehicleVariant = \"AUTO_RICKSHAW\";  // You can replace this with pm.environment.get(\"vehicleVariant\") if it's set dynamically.",
              "",
              "if (body.estimates && body.estimates.length > 0) {",
              "    let matchingEstimate = body.estimates.find(estimate => ",
              "        estimate.vehicleVariant === vehicleVariant && ",
              "        estimate.agencyName === \"MSIL\"",
              "    );",
              "",
              "    if (matchingEstimate) {",
              "        postman.setEnvironmentVariable(\"autoEstimateId\", matchingEstimate.id);",
              "        console.log(\"Found matching estimate, ID set:\", matchingEstimate.id);",
              "    } else {",
              "        console.log(\"No matching MSIL AUTO_RICKSHAW estimate found.\");",
              "        postman.clearEnvironmentVariable(\"autoEstimateId\");",
              "    }",
              "} else {",
              "    console.log(\"No estimates found in response.\");",
              "    postman.clearEnvironmentVariable(\"autoEstimateId\");",
              "}"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "2942a077-2351-4c85-8aea-76d0eb6479b0",
            "exec": [
              "setTimeout(function(){},3000)",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "dd5785b9-1dbf-42eb-92d1-f4aa20c80c2f",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{curr_user_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [
          {
            "key": "token",
            "value": "{{curr_user_token}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "{{baseUrl_app}}/rideSearch/:searchId/results",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "rideSearch",
            ":searchId",
            "results"
          ],
          "variable": [
            {
              "id": "82208523-7e6b-4036-b118-6d63978ad3fc",
              "key": "searchId",
              "value": "{{curr_searchId}}"
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-dd5785b9-1dbf-42eb-92d1-f4aa20c80c2f"
    },
    {
      "name": "estimateId/select2",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "73448446-930c-4c03-887f-32e49152ec59",
            "exec": [
              "setTimeout(function(){},1500)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "93a0e51d-711a-4b62-8a87-a8fd5efc3d02",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "});",
              "",
              "var responseBody = pm.response.json()",
              "",
              "pm.test(\"Result - Successful\", function() {",
              "    pm.expect(responseBody.result).to.be.equal(\"Success\")",
              "})",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "7c508d9e-79db-4b04-976c-a172c174a505",
      "protocolProfileBehavior": {
        "disabledSystemHeaders": {
          "": true
        },
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "value",
              "value": "{{curr_user_token}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"customerExtraFee\": null,\n  \"autoAssignEnabledV2\": true,\n  \"autoAssignEnabled\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl_app}}/estimate/:estimateId/select2?autoAssignEnabledV2=true&autoAssignEnabled=",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "estimate",
            ":estimateId",
            "select2"
          ],
          "query": [
            {
              "key": "autoAssignEnabledV2",
              "value": "true"
            },
            {
              "key": "autoAssignEnabled",
              "value": ""
            }
          ],
          "variable": [
            {
              "id": "99edde28-6b14-4ccb-bbae-269ecee9b6bc",
              "key": "estimateId",
              "value": "{{autoEstimateId}}"
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-7c508d9e-79db-4b04-976c-a172c174a505"
    },
    {
      "name": "nearbyRideRequest",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "c2d9b3e6-fc8f-4521-9251-37e67a525482",
            "exec": [
              "var responseBody = pm.response.json();",
              "var nearbyRequest = responseBody.searchRequestsForDriver;",
              "var maxRetries = 4; // Maximum number of retries",
              "",
              "// Initialize or increment the retry count",
              "var retryCount = pm.collectionVariables.get(\"retryCount\") || 0;",
              "",
              "if (nearbyRequest && nearbyRequest.length > 0) {",
              "    // Set the searchReq_Id collection variable",
              "    pm.collectionVariables.set(\"searchReq_Id\", nearbyRequest[0].searchRequestId);",
              "    console.log(nearbyRequest[0].searchRequestId + \" searchRequestId\");",
              "",
              "    // Reset the retry count as the request was successful",
              "    pm.collectionVariables.set(\"retryCount\", 0);",
              "} else {",
              "    // Increment the retry count",
              "    retryCount++;",
              "    pm.collectionVariables.set(\"retryCount\", retryCount);",
              "",
              "    if (retryCount < maxRetries) {",
              "        console.log(`Retrying request (${retryCount}/${maxRetries})...`);",
              "        pm.execution.setNextRequest(pm.info.requestName); // Re-run the same request",
              "    } else {",
              "        console.log(`Max retries reached (${maxRetries}).`);",
              "        pm.collectionVariables.set(\"retryCount\", 0); // Reset retry count after max retries",
              "       PostmanLegacy.setNextRequest(null)",
              "    }",
              "}",
              "",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    console.log('req', pm.info.requestName);",
              "    console.log('res', responseBody);",
              "    pm.response.to.have.status(200);",
              "});",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "d012e082-d5f0-4b6a-92ec-f0fe3f3e00a6",
            "exec": [
              "setTimeout(function(){},7000)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "3b8344c9-6d40-4559-a0ca-9dc457126cc3",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{rider_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseURL_namma_P}}/driver/nearbyRideRequest",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "driver",
            "nearbyRideRequest"
          ]
        }
      },
      "response": [],
      "uid": "40603464-3b8344c9-6d40-4559-a0ca-9dc457126cc3"
    },
    {
      "name": "quoteOffer",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "setTimeout(function(){},1500)"
            ],
            "type": "text/javascript",
            "id": "af08356f-2a65-4243-b138-0b6979059f56"
          }
        },
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "});",
              "",
              "var responseBody = pm.response.json()",
              "",
              "pm.test(\"Result - Successful\", function() {",
              "    pm.expect(responseBody.result).to.be.equal(\"Success\")",
              "})",
              "",
              ""
            ],
            "type": "text/javascript",
            "id": "4b2c45d7-93ae-4996-951f-aa31041fdb4c"
          }
        }
      ],
      "id": "e4f81c5a-fc30-442d-8012-15ffe7c400f9",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{rider_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"searchRequestId\":\"{{searchReq_Id}}\",\n  \"offeredFare\": 0\n}\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL_namma_P}}/driver/searchRequest/quote/offer",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "driver",
            "searchRequest",
            "quote",
            "offer"
          ]
        }
      },
      "response": [],
      "uid": "40603464-e4f81c5a-fc30-442d-8012-15ffe7c400f9"
    },
    {
      "name": "driverRideList",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "d00e60c7-3d2f-4afd-8076-8c3f48327e43",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    console.log('req', request)",
              "     console.log('res', responseBody)",
              "});",
              "",
              "pm.collectionVariables.set(\"DriverRide_id\", jsonData.list[0].id);",
              "console.log(pm.environment.get(\"DriverRide_id\"));",
              "",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "3e7d7a79-80f3-492c-8212-f5cf1705f947",
            "exec": [
              "setTimeout(function(){},1500)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "b8ca2398-0618-40d7-8f65-ea8042a30902",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{rider_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseURL_namma_P}}/driver/ride/list?limit=1&onlyActive=true",
          "host": [
            "{{baseURL_namma_P}}"
          ],
          "path": [
            "driver",
            "ride",
            "list"
          ],
          "query": [
            {
              "key": "limit",
              "value": "1"
            },
            {
              "key": "onlyActive",
              "value": "true"
            },
            {
              "key": "status",
              "value": "\"CANCELLED\"",
              "disabled": true
            },
            {
              "key": "day",
              "value": "2023-10-04",
              "disabled": true
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-b8ca2398-0618-40d7-8f65-ea8042a30902"
    },
    {
      "name": "UserBookingList",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "b21f2a1f-988b-444d-b6b1-d585bf573e3e",
            "exec": [
              "var jsonData = JSON.parse(responseBody);",
              "",
              "pm.test(\"Status code is 200\", function () {",
              "    console.log('req', request)",
              "    console.log('res', responseBody)",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.collectionVariables.set(\"otp\", jsonData.list[0].rideList[0].rideOtp);",
              "pm.collectionVariables.set(\"customer_bookingId\", jsonData.list[0].id);",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "b8d34e60-ef05-462c-bdf9-a3ddc61c50b7",
            "exec": [
              "setTimeout(function(){},1500)"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "id": "6d88e2ef-ef34-441f-9cb6-51793dec7e71",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{curr_user_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl_app}}/rideBooking/list?limit=1",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "rideBooking",
            "list"
          ],
          "query": [
            {
              "key": "limit",
              "value": "1"
            },
            {
              "key": "onlyActive",
              "value": "true",
              "disabled": true
            },
            {
              "key": "day",
              "value": "2023-10-04",
              "disabled": true
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-6d88e2ef-ef34-441f-9cb6-51793dec7e71"
    },
    {
      "name": "User Cancellation",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Verified whether status code is 200\", function () {",
              "    console.log('req', request)",
              "    console.log('res', responseBody)",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "if (responseCode.code !== 200) ",
              "{",
              "    postman.setNextRequest(null);",
              "}"
            ],
            "type": "text/javascript",
            "packages": {},
            "id": "6de38406-13ac-4c45-8871-585d49755713"
          }
        }
      ],
      "id": "f1025714-2ff4-4f7c-a274-617716e59957",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "value",
              "value": "{{curr_user_token}}",
              "type": "string"
            },
            {
              "key": "key",
              "value": "token",
              "type": "string"
            },
            {
              "key": "in",
              "value": "header",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json;charset=utf-8"
          },
          {
            "key": "token",
            "value": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"additionalInfo\": \"By Mistake\",\n    \"reasonCode\": \"By Mistake By Mistake\",\n    \"reasonStage\": \"OnSearch\"\n}\n"
        },
        "url": {
          "raw": "{{baseUrl_app}}/rideBooking/:bookingId/cancel",
          "host": [
            "{{baseUrl_app}}"
          ],
          "path": [
            "rideBooking",
            ":bookingId",
            "cancel"
          ],
          "variable": [
            {
              "id": "3213b0e8-13f8-464d-a231-f2d2665cd87f",
              "key": "bookingId",
              "value": "{{customer_bookingId}}"
            }
          ]
        }
      },
      "response": [],
      "uid": "40603464-f1025714-2ff4-4f7c-a274-617716e59957"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "exec": [
          ""
        ],
        "id": "4151eb3f-62c4-48ab-a621-d225c748199b"
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "exec": [
          ""
        ],
        "id": "275a11d6-b674-4eb8-a16b-0688617b4ae3"
      }
    }
  ],
  "variable": [
    {
      "key": "driver_number",
      "value": ""
    },
    {
      "key": "user_number",
      "value": ""
    },
    {
      "key": "curr_user_token",
      "value": ""
    },
    {
      "key": "curr_rider_authId",
      "value": ""
    },
    {
      "key": "rider_token",
      "value": ""
    },
    {
      "key": "driver_id",
      "value": ""
    },
    {
      "key": "user_authIdId",
      "value": ""
    },
    {
      "key": "curr_searchId",
      "value": ""
    },
    {
      "key": "estimate_id",
      "value": ""
    },
    {
      "key": "searchReq_Id",
      "value": ""
    },
    {
      "key": "quote_id",
      "value": ""
    },
    {
      "key": "DriverRide_id",
      "value": ""
    },
    {
      "key": "otp",
      "value": ""
    },
    {
      "key": "ride_otp",
      "value": ""
    },
    {
      "key": "otpcheck",
      "value": ""
    },
    {
      "key": "agencyName",
      "value": ""
    },
    {
      "key": "sedanestimate_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "autoEstimateId",
      "value": ""
    },
    {
      "key": "taxiEstimateId",
      "value": ""
    },
    {
      "key": "hatchbackEstimateId",
      "value": ""
    },
    {
      "key": "sedanEstimateId",
      "value": ""
    },
    {
      "key": "suvEstimateId",
      "value": ""
    },
    {
      "key": "retryCount",
      "value": ""
    },
    {
      "key": "customer_bookingId",
      "value": ""
    }
  ]
}